<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VueCLI学习笔记 | Vivien&#39;s Notebook</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/vivien-blog/logo.jpg">
    <script src="/vivien-blog/watermark.js"></script>
    <meta name="description" content="Vivien个人博客">
    
    <link rel="preload" href="/vivien-blog/assets/css/0.styles.4edee94f.css" as="style"><link rel="preload" href="/vivien-blog/assets/js/app.6cea8693.js" as="script"><link rel="preload" href="/vivien-blog/assets/js/7.ec60f3e8.js" as="script"><link rel="preload" href="/vivien-blog/assets/js/2.6744b811.js" as="script"><link rel="preload" href="/vivien-blog/assets/js/1.4a3363c7.js" as="script"><link rel="preload" href="/vivien-blog/assets/js/14.dac78458.js" as="script"><link rel="prefetch" href="/vivien-blog/assets/js/10.4c4f923d.js"><link rel="prefetch" href="/vivien-blog/assets/js/100.23f6ee21.js"><link rel="prefetch" href="/vivien-blog/assets/js/101.27280ff0.js"><link rel="prefetch" href="/vivien-blog/assets/js/102.036dcfc2.js"><link rel="prefetch" href="/vivien-blog/assets/js/103.dd57924a.js"><link rel="prefetch" href="/vivien-blog/assets/js/104.c64926ce.js"><link rel="prefetch" href="/vivien-blog/assets/js/105.ae22082c.js"><link rel="prefetch" href="/vivien-blog/assets/js/106.407a6b6f.js"><link rel="prefetch" href="/vivien-blog/assets/js/107.c8a4dfa2.js"><link rel="prefetch" href="/vivien-blog/assets/js/108.9c61cc83.js"><link rel="prefetch" href="/vivien-blog/assets/js/109.c1172022.js"><link rel="prefetch" href="/vivien-blog/assets/js/11.c96b7ce6.js"><link rel="prefetch" href="/vivien-blog/assets/js/110.a8a43b83.js"><link rel="prefetch" href="/vivien-blog/assets/js/111.4c5d72c5.js"><link rel="prefetch" href="/vivien-blog/assets/js/112.31c468c6.js"><link rel="prefetch" href="/vivien-blog/assets/js/113.7c8ad5fd.js"><link rel="prefetch" href="/vivien-blog/assets/js/114.2919ddce.js"><link rel="prefetch" href="/vivien-blog/assets/js/115.9492e6b7.js"><link rel="prefetch" href="/vivien-blog/assets/js/116.da465a8b.js"><link rel="prefetch" href="/vivien-blog/assets/js/117.d5a69554.js"><link rel="prefetch" href="/vivien-blog/assets/js/118.4dae8780.js"><link rel="prefetch" href="/vivien-blog/assets/js/119.e61066ef.js"><link rel="prefetch" href="/vivien-blog/assets/js/120.95523cfb.js"><link rel="prefetch" href="/vivien-blog/assets/js/121.7279e08a.js"><link rel="prefetch" href="/vivien-blog/assets/js/122.1946f5d1.js"><link rel="prefetch" href="/vivien-blog/assets/js/123.1d46e7f2.js"><link rel="prefetch" href="/vivien-blog/assets/js/124.0e99b17d.js"><link rel="prefetch" href="/vivien-blog/assets/js/125.e4ce0029.js"><link rel="prefetch" href="/vivien-blog/assets/js/126.9e0257d6.js"><link rel="prefetch" href="/vivien-blog/assets/js/127.258e05ea.js"><link rel="prefetch" href="/vivien-blog/assets/js/128.19174f18.js"><link rel="prefetch" href="/vivien-blog/assets/js/129.a953a1b8.js"><link rel="prefetch" href="/vivien-blog/assets/js/130.cd9ca58a.js"><link rel="prefetch" href="/vivien-blog/assets/js/131.bf7582dc.js"><link rel="prefetch" href="/vivien-blog/assets/js/132.60d3ae71.js"><link rel="prefetch" href="/vivien-blog/assets/js/15.30ff7af8.js"><link rel="prefetch" href="/vivien-blog/assets/js/16.f5bca61b.js"><link rel="prefetch" href="/vivien-blog/assets/js/17.7fea8ba1.js"><link rel="prefetch" href="/vivien-blog/assets/js/18.8a66241c.js"><link rel="prefetch" href="/vivien-blog/assets/js/19.9f2773f4.js"><link rel="prefetch" href="/vivien-blog/assets/js/20.7b40b439.js"><link rel="prefetch" href="/vivien-blog/assets/js/21.53d462a3.js"><link rel="prefetch" href="/vivien-blog/assets/js/22.de88dfed.js"><link rel="prefetch" href="/vivien-blog/assets/js/23.f2b02a6d.js"><link rel="prefetch" href="/vivien-blog/assets/js/24.e9a7a488.js"><link rel="prefetch" href="/vivien-blog/assets/js/25.9f932c51.js"><link rel="prefetch" href="/vivien-blog/assets/js/26.bf9dc0fe.js"><link rel="prefetch" href="/vivien-blog/assets/js/27.806995a3.js"><link rel="prefetch" href="/vivien-blog/assets/js/28.42a6ae8d.js"><link rel="prefetch" href="/vivien-blog/assets/js/29.f3069a68.js"><link rel="prefetch" href="/vivien-blog/assets/js/3.7a6d346e.js"><link rel="prefetch" href="/vivien-blog/assets/js/30.a0c45895.js"><link rel="prefetch" href="/vivien-blog/assets/js/31.a10b30c7.js"><link rel="prefetch" href="/vivien-blog/assets/js/32.4c227bf7.js"><link rel="prefetch" href="/vivien-blog/assets/js/33.9873b2e4.js"><link rel="prefetch" href="/vivien-blog/assets/js/34.661b84b0.js"><link rel="prefetch" href="/vivien-blog/assets/js/35.e6dccfdc.js"><link rel="prefetch" href="/vivien-blog/assets/js/36.98205037.js"><link rel="prefetch" href="/vivien-blog/assets/js/37.4a9dc5bf.js"><link rel="prefetch" href="/vivien-blog/assets/js/38.dc9c4a51.js"><link rel="prefetch" href="/vivien-blog/assets/js/39.be23166d.js"><link rel="prefetch" href="/vivien-blog/assets/js/4.6d6477a3.js"><link rel="prefetch" href="/vivien-blog/assets/js/40.e5f670f0.js"><link rel="prefetch" href="/vivien-blog/assets/js/41.236d900a.js"><link rel="prefetch" href="/vivien-blog/assets/js/42.67482f69.js"><link rel="prefetch" href="/vivien-blog/assets/js/43.1de2024a.js"><link rel="prefetch" href="/vivien-blog/assets/js/44.7ddd9470.js"><link rel="prefetch" href="/vivien-blog/assets/js/45.31587bf5.js"><link rel="prefetch" href="/vivien-blog/assets/js/46.8616ff54.js"><link rel="prefetch" href="/vivien-blog/assets/js/47.d3d247b3.js"><link rel="prefetch" href="/vivien-blog/assets/js/48.927b0f38.js"><link rel="prefetch" href="/vivien-blog/assets/js/49.8e7e832e.js"><link rel="prefetch" href="/vivien-blog/assets/js/5.8f70aa2d.js"><link rel="prefetch" href="/vivien-blog/assets/js/50.e8d25d24.js"><link rel="prefetch" href="/vivien-blog/assets/js/51.e8251262.js"><link rel="prefetch" href="/vivien-blog/assets/js/52.fbef7aa0.js"><link rel="prefetch" href="/vivien-blog/assets/js/53.2b707def.js"><link rel="prefetch" href="/vivien-blog/assets/js/54.b5188815.js"><link rel="prefetch" href="/vivien-blog/assets/js/55.8b80c528.js"><link rel="prefetch" href="/vivien-blog/assets/js/56.ff6f8345.js"><link rel="prefetch" href="/vivien-blog/assets/js/57.ddbebf8b.js"><link rel="prefetch" href="/vivien-blog/assets/js/58.b4c57804.js"><link rel="prefetch" href="/vivien-blog/assets/js/59.a035b4e8.js"><link rel="prefetch" href="/vivien-blog/assets/js/6.892ce6e5.js"><link rel="prefetch" href="/vivien-blog/assets/js/60.b8bfb276.js"><link rel="prefetch" href="/vivien-blog/assets/js/61.843f60af.js"><link rel="prefetch" href="/vivien-blog/assets/js/62.51cffd1c.js"><link rel="prefetch" href="/vivien-blog/assets/js/63.91b00a61.js"><link rel="prefetch" href="/vivien-blog/assets/js/64.48a3a79a.js"><link rel="prefetch" href="/vivien-blog/assets/js/65.6c36e44e.js"><link rel="prefetch" href="/vivien-blog/assets/js/66.8e9ea32a.js"><link rel="prefetch" href="/vivien-blog/assets/js/67.18095c46.js"><link rel="prefetch" href="/vivien-blog/assets/js/68.f74a0870.js"><link rel="prefetch" href="/vivien-blog/assets/js/69.4e844f29.js"><link rel="prefetch" href="/vivien-blog/assets/js/70.41013b20.js"><link rel="prefetch" href="/vivien-blog/assets/js/71.26e44e39.js"><link rel="prefetch" href="/vivien-blog/assets/js/72.be7cf2c3.js"><link rel="prefetch" href="/vivien-blog/assets/js/73.1808562e.js"><link rel="prefetch" href="/vivien-blog/assets/js/74.d3cdb9ff.js"><link rel="prefetch" href="/vivien-blog/assets/js/75.56b600ce.js"><link rel="prefetch" href="/vivien-blog/assets/js/76.7bc9c5d1.js"><link rel="prefetch" href="/vivien-blog/assets/js/77.7a8e0bfc.js"><link rel="prefetch" href="/vivien-blog/assets/js/78.51f45190.js"><link rel="prefetch" href="/vivien-blog/assets/js/79.ff61e0ac.js"><link rel="prefetch" href="/vivien-blog/assets/js/8.b0ba342b.js"><link rel="prefetch" href="/vivien-blog/assets/js/80.baa5d407.js"><link rel="prefetch" href="/vivien-blog/assets/js/81.285bac2c.js"><link rel="prefetch" href="/vivien-blog/assets/js/82.f50cbf20.js"><link rel="prefetch" href="/vivien-blog/assets/js/83.6440b662.js"><link rel="prefetch" href="/vivien-blog/assets/js/84.bfd378d6.js"><link rel="prefetch" href="/vivien-blog/assets/js/85.563bf7c2.js"><link rel="prefetch" href="/vivien-blog/assets/js/86.3eab528c.js"><link rel="prefetch" href="/vivien-blog/assets/js/87.cc2933f4.js"><link rel="prefetch" href="/vivien-blog/assets/js/88.5ed12de4.js"><link rel="prefetch" href="/vivien-blog/assets/js/89.12e1a1e4.js"><link rel="prefetch" href="/vivien-blog/assets/js/9.524cff04.js"><link rel="prefetch" href="/vivien-blog/assets/js/90.e4e40c40.js"><link rel="prefetch" href="/vivien-blog/assets/js/91.d28d824d.js"><link rel="prefetch" href="/vivien-blog/assets/js/92.88c3e050.js"><link rel="prefetch" href="/vivien-blog/assets/js/93.45a553ea.js"><link rel="prefetch" href="/vivien-blog/assets/js/94.74a76eb1.js"><link rel="prefetch" href="/vivien-blog/assets/js/95.6314d68a.js"><link rel="prefetch" href="/vivien-blog/assets/js/96.0def9066.js"><link rel="prefetch" href="/vivien-blog/assets/js/97.1010a1a2.js"><link rel="prefetch" href="/vivien-blog/assets/js/98.5dd57b30.js"><link rel="prefetch" href="/vivien-blog/assets/js/99.b01b0c86.js"><link rel="prefetch" href="/vivien-blog/assets/js/vendors~docsearch.da1394aa.js">
    <link rel="stylesheet" href="/vivien-blog/assets/css/0.styles.4edee94f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-222e0b9d><div data-v-222e0b9d><div class="password-shadow password-wrapper-out" style="display:none;" data-v-15719524 data-v-222e0b9d data-v-222e0b9d><h3 class="title" data-v-15719524>Vivien's Notebook</h3> <p class="description" data-v-15719524>Vivien个人博客</p> <label id="box" class="inputBox" data-v-15719524><input type="password" value="" data-v-15719524> <span data-v-15719524>Konck! Knock!</span> <button data-v-15719524>OK</button></label> <div class="footer" data-v-15719524><span data-v-15719524><i class="iconfont reco-theme" data-v-15719524></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-15719524>vuePress-theme-reco</a></span> <span data-v-15719524><i class="iconfont reco-copyright" data-v-15719524></i> <a data-v-15719524><!---->
          
        <!---->
        2025
      </a></span></div></div> <div class="hide" data-v-222e0b9d><header class="navbar" data-v-222e0b9d><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vivien-blog/" class="home-link router-link-active"><img src="/vivien-blog/logo.jpg" alt="Vivien's Notebook" class="logo"> <span class="site-name">Vivien's Notebook</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vivien-blog/base/browser/输入URL到页面展示发生了什么/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></div><div class="nav-item"><a href="/vivien-blog/Vue/Vue3学习笔记/Vue3与Vue2对比/" class="nav-link"><i class="undefined"></i>
  Vue
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      微前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vivien-blog/MicroFrontends/微前端基础知识/" class="nav-link"><i class="undefined"></i>
  微前端基础知识
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/MicroFrontends/微前端解决方案/" class="nav-link"><i class="undefined"></i>
  微前端解决方案
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/MicroFrontends/使用MicroApp重构旧项目/" class="nav-link"><i class="undefined"></i>
  使用MicroApp重构旧项目
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      前端工程化
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vivien-blog/devops/代码规范/概述/" class="nav-link"><i class="undefined"></i>
  代码规范
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/devops/webpack/webpack执行流程/" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/devops/CICD/半自动化部署/" class="nav-link"><i class="undefined"></i>
  CICD
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/devops/渲染架构/前端渲染模式/" class="nav-link"><i class="undefined"></i>
  架构&amp;方案
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      书籍
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vivien-blog/books/深入浅出webpack/为什么要使用webpack/" class="nav-link"><i class="undefined"></i>
  深入浅出webpack
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/books/ES6入门教程/ES6与JavaScript/" class="nav-link"><i class="undefined"></i>
  ES6入门教程
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/books/TypeScript教程/简介和基本用法/" class="nav-link"><i class="undefined"></i>
  TypeScript教程
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/books/Vue.js设计与实现/1.权衡的艺术/" class="nav-link"><i class="undefined"></i>
  Vue.js设计与实现
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      项目实践
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vivien-blog/project/权限控制/权限控制基础知识/" class="nav-link"><i class="undefined"></i>
  权限控制
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/project/项目搭建/搭建一个组件库/" class="nav-link"><i class="undefined"></i>
  项目搭建
</a></li></ul></div></div><div class="nav-item"><a href="/vivien-blog/React/React基础知识/" class="nav-link"><i class="undefined"></i>
  React
</a></div><div class="nav-item"><a href="/vivien-blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/vivien-blog/messageBoard/messageBoard.html" class="nav-link"><i class="iconfont reco-message"></i>
  留言板
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      contact Vivien
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yoguoer" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Vivien_CC" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-222e0b9d></div> <aside class="sidebar" data-v-222e0b9d><div class="personal-info-wrapper" data-v-2710484f data-v-222e0b9d><img src="/vivien-blog/avator.jpg" alt="author-avatar" class="personal-img" data-v-2710484f> <!----> <div class="num" data-v-2710484f><div data-v-2710484f><h3 data-v-2710484f>92</h3> <h6 data-v-2710484f>文章</h6></div> <div data-v-2710484f><h3 data-v-2710484f>11</h3> <h6 data-v-2710484f>标签</h6></div></div> <ul class="social-links" data-v-2710484f><li class="social-item" data-v-2710484f><i class="iconfont reco-github" style="color:#f26d6d;" data-v-2710484f></i></li></ul> <hr data-v-2710484f></div> <nav class="nav-links"><div class="nav-item"><a href="/vivien-blog/base/browser/输入URL到页面展示发生了什么/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></div><div class="nav-item"><a href="/vivien-blog/Vue/Vue3学习笔记/Vue3与Vue2对比/" class="nav-link"><i class="undefined"></i>
  Vue
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      微前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vivien-blog/MicroFrontends/微前端基础知识/" class="nav-link"><i class="undefined"></i>
  微前端基础知识
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/MicroFrontends/微前端解决方案/" class="nav-link"><i class="undefined"></i>
  微前端解决方案
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/MicroFrontends/使用MicroApp重构旧项目/" class="nav-link"><i class="undefined"></i>
  使用MicroApp重构旧项目
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      前端工程化
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vivien-blog/devops/代码规范/概述/" class="nav-link"><i class="undefined"></i>
  代码规范
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/devops/webpack/webpack执行流程/" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/devops/CICD/半自动化部署/" class="nav-link"><i class="undefined"></i>
  CICD
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/devops/渲染架构/前端渲染模式/" class="nav-link"><i class="undefined"></i>
  架构&amp;方案
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      书籍
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vivien-blog/books/深入浅出webpack/为什么要使用webpack/" class="nav-link"><i class="undefined"></i>
  深入浅出webpack
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/books/ES6入门教程/ES6与JavaScript/" class="nav-link"><i class="undefined"></i>
  ES6入门教程
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/books/TypeScript教程/简介和基本用法/" class="nav-link"><i class="undefined"></i>
  TypeScript教程
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/books/Vue.js设计与实现/1.权衡的艺术/" class="nav-link"><i class="undefined"></i>
  Vue.js设计与实现
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      项目实践
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vivien-blog/project/权限控制/权限控制基础知识/" class="nav-link"><i class="undefined"></i>
  权限控制
</a></li><li class="dropdown-item"><!----> <a href="/vivien-blog/project/项目搭建/搭建一个组件库/" class="nav-link"><i class="undefined"></i>
  项目搭建
</a></li></ul></div></div><div class="nav-item"><a href="/vivien-blog/React/React基础知识/" class="nav-link"><i class="undefined"></i>
  React
</a></div><div class="nav-item"><a href="/vivien-blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/vivien-blog/messageBoard/messageBoard.html" class="nav-link"><i class="iconfont reco-message"></i>
  留言板
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      contact Vivien
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yoguoer" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Vivien_CC" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue3学习笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vivien-blog/Vue/Vue3学习笔记/Vue3与Vue2对比.html" class="sidebar-link">Vue3与Vue2对比</a></li><li><a href="/vivien-blog/Vue/Vue3学习笔记/创建Vue3项目.html" class="sidebar-link">创建Vue3项目</a></li><li><a href="/vivien-blog/Vue/Vue3学习笔记/CompositionAPI.html" class="sidebar-link">Composition API</a></li><li><a href="/vivien-blog/Vue/Vue3学习笔记/新的组件.html" class="sidebar-link">新的组件</a></li><li><a href="/vivien-blog/Vue/Vue3学习笔记/其它新的API.html" class="sidebar-link">其它新的API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vivien-blog/Vue/原理学习/Vue2响应式原理.html" class="sidebar-link">Vue2响应式原理</a></li><li><a href="/vivien-blog/Vue/原理学习/VueCLI.html" class="active sidebar-link">VueCLI学习笔记</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-15719524 data-v-222e0b9d><h3 class="title" data-v-15719524>VueCLI学习笔记</h3> <!----> <label id="box" class="inputBox" data-v-15719524><input type="password" value="" data-v-15719524> <span data-v-15719524>Konck! Knock!</span> <button data-v-15719524>OK</button></label> <div class="footer" data-v-15719524><span data-v-15719524><i class="iconfont reco-theme" data-v-15719524></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-15719524>vuePress-theme-reco</a></span> <span data-v-15719524><i class="iconfont reco-copyright" data-v-15719524></i> <a data-v-15719524><!---->
          
        <!---->
        2025
      </a></span></div></div> <div data-v-222e0b9d><div data-v-222e0b9d><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">VueCLI学习笔记</h1> <div data-v-f31d237c><i class="iconfont reco-account" data-v-f31d237c><span data-v-f31d237c>vivien</span></i> <i class="iconfont reco-date" data-v-f31d237c><span data-v-f31d237c>2024/2/7</span></i> <i class="iconfont reco-eye" data-v-f31d237c><span id="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f31d237c><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-f31d237c><span class="tag-item" data-v-f31d237c>Vue</span></i></div></div> <div class="theme-reco-content content__default"><p>​        在看任何开源库的源码之前，必须先了解它有哪些功能，这样才能针对性地分模块阅读源码。</p> <h1 id="vue-cli-简介"><a href="#vue-cli-简介" class="header-anchor">#</a> Vue CLI 简介</h1> <p>​         Vue CLI是Vue.js的官方命令行工具，它是一个基于Vue.js进行快速开发的完整系统。</p> <p>​        通过Vue CLI，开发者可以快速搭建和开发Vue.js项目，提供了一整套完整的项目脚手架，包括项目初始化、开发服务器、构建工具等。</p> <p>​      是一个交互式的项目脚手架，通过简单的命令行界面，开发者可以快速创建一个新的Vue.js项目，并且会自动配置好项目的基本结构和依赖，让开发者可以直接开始编写代码。</p> <p>​      它还内置了一个开发服务器，可以在本地快速启动一个开发环境，并提供了一个强大的构建工具，可以将Vue.js项目打包成静态文件，用于部署到生产环境。</p> <h1 id="什么是脚手架"><a href="#什么是脚手架" class="header-anchor">#</a> 什么是脚手架？</h1> <p>​        脚手架在前端工程化中扮演着非常重要的角色。它不仅是一个快速生成项目结构的工具，更是一个完整的解决方案，为前端项目的整个生命周期提供了支持。</p> <p>​        使用脚手架可以快速地使用配置好的模板来初始化一个新的项目，避免了手动创建项目结构和配置文件的繁琐过程。脚手架提供的模板通常是经过优化和配置的，包含了前端开发所需的各种文件和目录结构，例如代码、资源、测试等。</p> <p>​        提供了一系列工具和规范以便更好地管理前端项目。这些工具和规范涵盖了前端项目的生命周期，包括搭建、开发、测试、部署等各个阶段，可以有效提高开发效率和质量。通过脚手架，开发人员可以避免做重复工作，更加专注于业务逻辑的实现，而不需要花费过多的时间和精力在项目的构建和管理上。</p> <h1 id="为什么要用脚手架"><a href="#为什么要用脚手架" class="header-anchor">#</a> 为什么要用脚手架？</h1> <p>​        使用脚手架的主要原因是为了提高开发效率和简化项目结构。随着前端技术的不断发展，项目的复杂性和规模也在逐渐增加，手动创建和管理项目变得越来越困难和耗时。脚手架作为前端工程化的解决方案，为开发人员提供了一种快速、高效的方式来初始化和管理项目。</p> <p>​        脚手架的发展历程也反映了前端开发的演变和进步。</p> <p>​       手动创建和配置项目。通过手动创建.html, .css, .js 文件，在 .html 里引入.css和.js文件。效率低下且容易出错。</p> <p>​       模板托管。将项目模板代码托管到Git/SVN仓库等版本控制系统中，通过手动拉取和修改来快速创建项目。仍然存在一些繁琐的步骤和潜在的错误风险。</p> <p>​       自动化脚本。通过自动化脚本可以快速拉取模板、配置项目信息等，减少手动操作的错误和时间。通常需要一定的技术门槛，且可扩展性和灵活性相对较低。</p> <p>​       完整的脚手架。通过命令行 <code>vue-cli/ create-react-app</code> 初始化项目，为开发人员提供了一个更高级、更完整的解决方案。可以快速初始化项目、选择模板、配置插件等，大大简化了项目初始化的过程。同时，脚手架还提供了对前端项目生命周期的支持，包括开发、测试、部署等各个环节的工具和规范。</p> <p>​       自定义扩展。在 Vue CLI 这种脚手架的基础上个性化定制，接入自定义模板、自动化 Git 流程等功能。通过可视化的交互和扩展性，开发人员可以根据自己的需求进行定制化的模板、插件等开发，实现更灵活、更高效的项目管理。</p> <h1 id="脚手架能解决什么核心问题"><a href="#脚手架能解决什么核心问题" class="header-anchor">#</a> 脚手架能解决什么核心问题？</h1> <p>​         脚手架解决的核心问题就是——帮助开发者更方便地初始化项目，从而提高开发效率和质量。这也就是为什么需要脚手架。</p> <p>​        以前，初始化一个项目的流程较为繁琐复杂，而现在可以快速搞定；</p> <p>​        同时，基于一套通用模板搭建多个系统，相同的项目结构有利于后期维护；</p> <p>​        最后，针对重复性的工作实现自动化，如创建文件、配置项目信息等。</p> <h1 id="vue-cli-的核心思想"><a href="#vue-cli-的核心思想" class="header-anchor">#</a> Vue CLI 的核心思想</h1> <p>​        核心思想主要有2个，分别是预设管理和灵活的插件系统。</p> <h3 id="预设管理"><a href="#预设管理" class="header-anchor">#</a> 预设管理</h3> <p>​        在CLI内部，通过一个统一的实例对prompt（终端交互/提示）和preset（预设）进行管理。在初始化时，这些用于终端交互的配置就初始化在内存中，根据用户的选择触发不同的逻辑。</p> <p>​       当用户运行vue create命令时，CLI会根据预设的配置进行初始化工作。用户可以根据提示选择不同的预设选项，这些选项会触发不同的逻辑，例如选择特定的插件、配置文件等。预设管理还允许开发者自定义预设，以适应不同的项目需求。</p> <blockquote><p>​        在源码中，Creator类负责初始化项目的过程。它使用一个预设管理器来加载和管理预设，并根据用户的选项和预设配置生成最终的项目结构。预设管理器会根据预设的配置生成一系列的提示，然后根据用户的输入和预设配置创建项目的骨架。</p></blockquote> <h3 id="插件系统"><a href="#插件系统" class="header-anchor">#</a> 插件系统</h3> <p>​        将CLI的逻辑和生成代码的逻辑解耦，通过不同的插件去修改文件内容和配置，生成最终的代码。CLI插件是向Vue项目提供可选功能的npm包，可以集成Babel/TypeScript转译、ESLint、单元测试等功能。</p> <p>​        当用户在项目内部运行<code>vue-cli-service</code>命令时，它会自动解析并加载package.json中列出的所有CLI插件。通过插件系统，开发者可以定制自己的项目配置，以满足特定的需求。</p> <blockquote><p>​        在源码中，Generator类负责生成最终的项目代码。它使用一个插件管理器来加载和管理插件。当用户选择特定的插件时，插件管理器会解析并加载相应的插件。插件可以修改生成代码的内容和配置，例如添加特定的文件、修改文件内容等。根据预设配置和插件修改的内容生成最终的项目代码。</p></blockquote> <h1 id="vue-cli-交互流程"><a href="#vue-cli-交互流程" class="header-anchor">#</a> Vue CLI 交互流程</h1> <p>​        Vue CLI的整体交互也就是prompt的实现。Vue CLI将所有交互分为四大类：</p> <p>​        从预设选项到具体feature选项，它们是一个层层递进的关系，不同的时机和选择会触发不同的交互。Vue CLI将各个交互维护在不同的模块中，通过一个统一的promptAPI实例，在Creator实例初始化时，插入到不同的prompt中，并且注册各自的回调函数。这样设计对于prompt而言是完全解耦的，删除某一项prompt 对于上下文几乎没有影响。</p> <h1 id="分析源码"><a href="#分析源码" class="header-anchor">#</a> 分析源码</h1> <p>​        围绕上面两个核心思想进行源码分析，源码中涉及到的核心类就是Creator和Generator。</p> <h2 id="整个生命周期"><a href="#整个生命周期" class="header-anchor">#</a> 整个生命周期</h2> <table><thead><tr><th>1</th> <th>执行vue create</th></tr></thead> <tbody><tr><td>2</td> <td>实例化Creator，挂载所有交互配置</td></tr> <tr><td>3</td> <td>调用creator实例上的create方法</td></tr> <tr><td>4</td> <td>询问用户的自定义配置</td></tr> <tr><td>5</td> <td>实例化Generator</td></tr> <tr><td>6</td> <td>初始化各种插件</td></tr> <tr><td>7</td> <td>执行插件的generator逻辑，写入package.json文件等</td></tr> <tr><td>8</td> <td>将文件写入硬盘，此时项目初始化完毕</td></tr></tbody></table> <h2 id="用法"><a href="#用法" class="header-anchor">#</a> 用法</h2> <p>​        安装Vue CLI：首先，确保系统中已经安装了Node.js和npm。然后，通过npm全局安装Vue CLI。在终端中运行以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> @vue/cli
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​       创建新项目：使用Vue CLI创建新的Vue项目。在终端中运行以下命令，并按照提示选择所需选项：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>vue create my-project
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​        通过预设和提示来统一管理用户在初始化项目时的交互。</p> <p><img src="data:image/png;base64,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" alt="image"></p> <p>​        可以根据自己的项目需求(可以选择使用Babel进行转译，或者使用TypeScript来编写代码。你还可以选择是否集成ESLint、单元测试等其他功能)来自定义项目工程配置，这样会更加的灵活。</p> <p>​       在选择完配置后，CLI会执行一系列命令来初始化项目。它首先会安装项目的依赖项，然后拷贝预设的模板文件到项目目录中。这些模板文件包含项目的基本结构和配置，使开发者可以快速开始开发工作。</p> <h2 id="入口"><a href="#入口" class="header-anchor">#</a> 入口</h2> <p>​        我们可以在@vue/cli/package.json里找到入口文件位置。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-2.e22c7667.png" alt="image"></p> <p>​    vue create命令的入口在@vue/cli/bin/vue.js中。可以看到，里面注册了create、add、ui等命令，vue使用commander库定义命令的配置项，并在配置中指明命令的执行文件。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-3.cac5d74a.png" alt="image"></p> <p>​       @vue/cli/bin/vue.js文件的执行流程：</p> <ul><li>①检查 Node.js 版本；</li> <li>②定义所有 vue 命令;</li> <li>③解析 shell 命令，并根据命令执行路径执行命令；</li></ul> <p><img src="/vivien-blog/assets/img/VueCLILearning-4.9b3285e2.png" alt="image"></p> <p>​        vue create命令支持一些参数配置，可以通过vue create --help获取详细的文档。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用法：create [options] &lt;app-name&gt;

选项：
  -p, --preset &lt;presetName&gt;       忽略提示符并使用已保存的或远程的预设选项
  -d, --default                   忽略提示符并使用默认预设选项
  -i, --inlinePreset &lt;json&gt;       忽略提示符并使用内联的 JSON 字符串预设选项
  -m, --packageManager &lt;command&gt;  在安装依赖时使用指定的 npm 客户端
  -r, --registry &lt;url&gt;            在安装依赖时使用指定的 npm registry
  -g, --git [message]             强制 / 跳过 git 初始化，并可选的指定初始化提交信息
  -n, --no-git                    跳过 git 初始化
  -f, --force                     覆写目标目录可能存在的配置
  -c, --clone                     使用 git clone 获取远程预设选项
  -x, --proxy                     使用指定的代理创建项目
  -b, --bare                      创建项目时省略默认组件中的新手指导信息
  -h, --help                      输出使用帮助信息 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="基础验证"><a href="#基础验证" class="header-anchor">#</a> 基础验证</h3> <p>​        执行vue create命令时会加载cli/lib/create.js中的create函数。比较重要的是name和targetDir这两个，接下来执行函数validateProjectName利用npm包validate-npm-package-name 判断项目名称是否符合npm包名规范，并输出相应的errors或者warnings。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-5.9e926a29.png" alt="image"></p> <p>​        在验证包名之后，会判断项目目录是否与当前已有目录重复。就是判断target目录是否存在，然后通过交互询问用户是否覆盖(对应的是操作是删除原目录)。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-6.1079b598.png" alt="image"></p> <h2 id="creator类"><a href="#creator类" class="header-anchor">#</a> Creator类</h2> <p>​        在基础验证完成以后会创建一个Creator实例。</p> <p><img src="data:image/png;base64,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" alt="image"></p> <p>​        在创建一个Creator实例后，然后调用了create方法</p> <p><img src="data:image/png;base64,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" alt="image"></p> <h3 id="constructor-构造函数"><a href="#constructor-构造函数" class="header-anchor">#</a> constructor 构造函数</h3> <p>​       看一下Creator类的构造函数，主要将逻辑封装在resolveIntroPrompts/resolveOutroPrompts和PromptModuleAPI这几个方法中 。下面开始看一下初始化Creator实例发生了什么。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-9.22a6316b.png" alt="image"></p> <p>​       主要看一下PromptModuleAPI这个类是干什么的。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-10.eac55d4a.png" alt="image"></p> <ul><li>PromptModuleAPI实例会先调用它的实例方法。</li> <li>然后将injectFeature、injectPrompt、injectOptionForPrompt、onPromptComplete保存到 Creator实例对应的变量中。</li> <li>最后遍历getPromptModules获取的promptModules，传入实例promptAPI，初始化Creator 实例中featurePrompt, injectedPrompts, promptCompleteCbs变量。</li></ul> <blockquote><p>featurePrompt：提供一个一级列表，当用户选择了Vue Version / Babel / TypeScript等选项之后，会弹出新的交互，比如Choose Vue version。
injectedPrompts：就是存储的这些具体选项的列表，即getPromptModules在promptModules目录获取到的那些prompt模块。</p></blockquote> <p>​      vue-cli-preset：一个Vue CLI preset是一个包含创建新项目所需预定义选项和插件的JSON对象，让用户无需在命令提示中选择它们。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-11.728137d7.png" alt="image"></p> <p>​        promptModules返回的是所有用于终端交互的模块，其中会调用injectFeature和injectPrompt来将交互配置插入进去，并且会通过onPromptComplete注册一个回调。onPromptComplete注册回调的形式是往promptCompleteCbs这个数组中push了传入的方法，在所有交互完成之后调用回调。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">Creator</span> <span class="token keyword">extends</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> context<span class="token punctuation">,</span> promptModules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> promptAPI <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PromptModuleAPI</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    promptModules<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=&gt;</span> <span class="token function">m</span><span class="token punctuation">(</span>promptAPI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>​         在Creator的构造函数中，实例化了一个promptAPI对象，并遍历promptModules把这个对象传入了promptModules中，说明在实例化Creator的时候就会把所有用于交互的配置注册好了。</p> <h3 id="eventemitter-事件模块"><a href="#eventemitter-事件模块" class="header-anchor">#</a> EventEmitter 事件模块</h3> <p>​        Creator类是继承于Node.js的EventEmitter类。events是Node.js中最重要的一个模块，而EventEmitter类就是其基础，是Node.js中事件触发与事件监听等功能的封装。Creator类继承自EventEmitter，应该就是为了方便在create过程中emit一些事件，主要就是以下8个事件：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'creating'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'git-init'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化 git</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'plugins-install'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 安装插件</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'invoking-generators'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用 generator</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'deps-install'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 安装额外的依赖</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'completion-hooks'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 完成之后的回调</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'done'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// create 流程结束</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'fetch-remote-preset'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拉取远程 preset </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>​        事件emit 一定会有on的地方，这里是在@vue/cli-ui这个包里，也就是说，在终端命令行工具的场景下，不会触发到这些事件。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> creator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Creator</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> cwd<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getPromptModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function-variable function">onCreationEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  progress<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token constant">PROGRESS_ID</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> event<span class="token punctuation">,</span> <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
creator<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> onCreationEvent<span class="token punctuation">)</span><span class="token punctuation">;</span> 著作权归「玩相机的程序员<span class="token operator">-</span>axuebin」，转载请先联系微信 xb9207 
      <span class="token literal-property property">链接：http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>axuebin<span class="token punctuation">.</span>com<span class="token operator">/</span>articles<span class="token operator">/</span>fe<span class="token operator">-</span>solution<span class="token operator">/</span>cli<span class="token operator">/</span>vuecli<span class="token punctuation">.</span>html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>​        简单来说，就是通过vue ui启动一个图形化界面来初始化项目时，会启动一个server端，和终端之间是存在通信的。server端挂载了一些事件，在create的每个阶段，会从cli中的方法触发这些事件。</p> <h2 id="preset-预设"><a href="#preset-预设" class="header-anchor">#</a> Preset 预设</h2> <p>​       preset预设参数初始化：Preset是一个包含创建新项目所需预定义选项和插件的JSON对象，让用户无需在命令提示中选择它们。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-12.c28a416c.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-13.b3c90e75.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-14.30ad97c0.png" alt="image"></p> <p>​        CLI中允许使用本地的preset和远程的preset。</p> <h3 id="getpromptmodules-获取交互模块"><a href="#getpromptmodules-获取交互模块" class="header-anchor">#</a> getPromptModules 获取交互模块</h3> <p>​         按照字面意思，这个方法获取了一系列用于和用户交互的模块，返回了一个数组。获取了babel，typescript，pwa，router，vuex，cssPreprocessors，linter，unit，e2e的Prompt的配置信息。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-15.519019af.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-16.5a9187bb.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-17.681d74c9.png" alt="image"></p> <p>​       这些模块的代码格式基本都是统一的。以 unit 为例：</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-18.b932fe32.png" alt="image"></p> <p>​      cli.injectFeature：用户交互的一些配置选项，注入featurePrompt，即初始化项目时选择babel，typescript，pwa等等。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-19.1421d398.png" alt="image"></p> <p>​       cli.injectPrompt：根据选择的featurePrompt然后注入对应的prompt。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-20.f0f2675f.png" alt="image"></p> <p>​       cli.onPromptComplete：就是一个回调方法，在完成交互后执行，会根据选择来添加对应的插件，当选择了mocha，那么就会添加 @vue/cli-plugin-unit-mocha 插件。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-21.eb95b297.png" alt="image"></p> <h3 id="getpreset-获取预设"><a href="#getpreset-获取预设" class="header-anchor">#</a> getPreset 获取预设</h3> <p>​        在基础验证完成以后会创建一个Creator实例，然后调用实例方法create，创建项目的核心方法在Creator.create()中，最开始是获取preset预设参数初始化。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-22.d1d1d30d.png" alt="image"></p> <p>​        先判断 vue create 命令是否带有-p选项，如果有的话会调用resolvePreset去解析preset。</p> <p>​        resolvePreset 函数会先获取 ～/.vuerc 中保存的preset， 然后进行遍历，如果里面包含了-p中的 <code>&lt;presetName&gt;</code>，则返回～/.vuerc中的preset。如果没有则判断是否是采用内联的JSON字符串预设选项，如果是就会解析.json文件，并返回preset，还有一种情况就是从远程获取preset(利用download-git-repo下载远程的preset.json)并返回。</p> <h3 id="savepreset-保存预设"><a href="#savepreset-保存预设" class="header-anchor">#</a> savePreset 保存预设</h3> <h4 id="promptandresolvepreset"><a href="#promptandresolvepreset" class="header-anchor">#</a> promptAndResolvePreset</h4> <p>​       promptAndResolvePreset()：在Vue CLI的最后，会让用户选择save this as a preset for future?，如果用户选择了Yes，就会执行相关逻辑将这次的交互结果保存下来。这部分的逻辑也是在promptAndResolvePreset中。</p> <p>​       <code>this.resolveFinalPrompts()</code>：就是将在Creator的构造函数里初始化的那些prompts合到一起了。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-23.975e298b.png" alt="image"></p> <p>inquirer.prompt执行完后返回answers，若选择本地保存的preset或default，则调用resolvePreset进行解析preset，否则遍历promptCompleteCbs执行injectFeature和injectPrompt的回调。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-24.2b0c20c8.png" alt="image"></p> <h3 id="自定义配置加载"><a href="#自定义配置加载" class="header-anchor">#</a> 自定义配置加载</h3> <p>​        以上提到的四种prompt分别对应的是预设选项、自定义feature选择、具体feature选项和其它选项，它们之间存在互相关联、层层递进的关系。结合这四种prompt，就是Vue CLI展现在用户面前的所有交互了，其中也包含自定义配置的加载。</p> <ul><li>presetPrompt：预设选项prompt。当上次以Manually模式进行了预设选项，并且保存到了 ~/.vuerc 中，那么在初始化项目时就会列出已经保存的preset，并提供选择。</li> <li>featurePrompt：自定义feature选择。如果在presetPrompt中选择Manually，则会继续选择 feature，featurePrompt就是存储的这个列表，项目的一些feature，就是选择babel，typescript，pwa，router，vuex，cssPreprocessors，linter，unit，e2e。</li> <li>injectedPrompts：具体feature选项。当选择了feature后，就会为对应的feature注入prompts，比如你选择unit，那么就会让你选择模式:Mocha+Chai还是Jest。featurePrompt 只是提供了一个一级列表，当用户选择了Vue Version/Babel/TypeScript等选项后，会弹出新的交互，比如Choose Vue version，injectedPrompts就是存储这些具体选项的列表，即通过getPromptModules()在promptModules目录获取到的那些prompt模块。</li> <li>outroPrompts：其他prompt选项。这里存储的就是一些除了上述三类选项之外的选项，</li></ul> <p>​        目前包含三个：</p> <ul><li>将Babel、PostCSS、ESLint等配置文件存放在package.json中还是存放在config文件中；</li> <li>是否需要将这次设置的preset保存到本地，如果需要则会进一步让你输入名称进行保存；</li> <li>安装依赖是选择npm还是yarn。</li></ul> <p>​        在调用savePreset之前还会对预设进行解析、校验等，来看一下savePreset方法：</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-25.a5bd42d3.png" alt="image"></p> <blockquote><p><code>Creator.create()</code>方法主要执行项目的参数初始化、包管理初始化、npm初始化、仓库初始化，通过Generator生成项目文件并安装项目依赖。</p></blockquote> <h2 id="generator类"><a href="#generator类" class="header-anchor">#</a> Generator类</h2> <p>​         Generator是vue create最核心的部分，这个类负责代码生成。</p> <p>​        生成项目文件(解析插件对象并创建生成器实例生成项目文件)：在安装完依赖以后，就会调用resolvePlugins，作用就是加载每个插件的generator，并且如果插件需要进行命令行交互的话会执行<code>inquirer.prompt</code>获取option。 在此之后会实例化一个Generator。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-26.d795699a.png" alt="image"></p> <p>​        在实例化一个Generator的时候会初始化一些成员变量，最重要的就是调用插件的generators，Vue-cli3.0采用了一套基于插件的架构，到这里就会交给各个插件去执行了。Generator实例化代码：</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-27.ea9d15c8.png" alt="image"></p> <h3 id="初始化插件"><a href="#初始化插件" class="header-anchor">#</a> 初始化插件</h3> <p>​     实例化Generator后，就会调用实例的generate方法，此时就差不多进入到了生成项目文件的阶段。大致可分为三部分，extractConfigFiles(提取配置文件)， resolveFiles(模板渲染)和 writeFileTree(在磁盘上生成文件)。在generate方法中，最先执行的是initPlugins方法。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-28.ea5f5a44.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-29.91238e68.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-30.30ab3387.png" alt="image"></p> <p><img src="data:image/png;base64,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" alt="image"></p> <ul><li>加载cli-service 核心插件：会执行 @vue/cli-service/generator/index.js 目录。</li> <li>加载cli-plugin-xxx/扩展插件：会加载对应cli-plugin-xxx/generator.js插件的generator方法。</li></ul> <p>​      比如加载@vue/cli-plugin-babel插件的 @vue/cli-plugin-babel/generator.js：会在当前项目的 ./node_modules/@vue/cli-plugin-babel/ 目录下加载generator.js文件。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-32.77f5e1ba.png" alt="image"></p> <p>​        这里的api就是一个GeneratorAPI实例，这里用到了一个extendPackage方法，通过该方法加载cli-plugin-babel后，默认的package.json就变成：</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-33.c9092b0e.png" alt="image"></p> <h3 id="generatorapi"><a href="#generatorapi" class="header-anchor">#</a> GeneratorAPI</h3> <p>​        vue-cli使用了基于一套插件的架构，查看一个项目的package.json，会发现依赖都是以@vue/cli-plugin-开头的。插件可以修改webpack的内部配置，也可以向vue-cli-service注入命令。在项目创建的过程中，绝大部分列出的特性都是通过插件来实现的。</p> <p>​        如果插件需要自定义项目模板、修改模板中的一些文件或者添加一些依赖，也有方法：@vue/cli插件所提供的generator向外暴露一个函数，接收的第一个参数api，然后通过该api提供的方法去完成应用的拓展工作，这里所说的api就是GeneratorAPI。</p> <p>​       下面看一下GeneratorAPI提供了哪些方法。</p> <ul><li><code>hasPlugin</code>：判断项目中是否有某个插件</li> <li><code>extendPackage</code>：拓展 package.json 配置</li> <li><code>render</code>：利用 ejs 渲染模板文件</li> <li><code>onCreateComplete</code>：内存中保存的文件字符串全部被写入文件后的回调函数</li> <li><code>exitLog</code>：当 generator 退出的时候输出的信息</li> <li><code>genJSConfig</code>：将 json 文件生成为 js 配置文件</li> <li><code>injectImports</code>：向文件当中注入import语法的方法</li> <li><code>injectRootOptions</code>：向 Vue 根实例中添加选项</li> <li>...</li></ul> <p>​        对于vue-cli 3.0内置的插件，比如：@vue/cli-plugin-eslint、@vue/cli-plugin-pwa等等，以及其他第三方插件，他们的generator作用都是一样的，都可以向项目的package.json中注入额外的依赖或字段，并向项目中添加文件。</p> <h3 id="extendpackage"><a href="#extendpackage" class="header-anchor">#</a> extendPackage</h3> <p>​     根据插件依赖生成package.json文件： 可以利用GeneratorAPI的extendPackage方法向package.json文件里面注入自定义内容，拓展配置。如scripts，eslintConfig以及devDependencies字段，另外也会根据选择的eslint模式添加对应的依赖和修改对应的配置文件。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-34.baaf6548.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-35.31fdddf2.png" alt="image"></p> <h3 id="extractconfigfiles"><a href="#extractconfigfiles" class="header-anchor">#</a> extractConfigFiles</h3> <p>​       根据包管理器自动判断NPM源，生成对应管理器的xxxrc文件：提取配置文件指的是将一些插件(如eslint，babel)的配置从package.json的字段中提取到专属的配置文件中。extractConfigFiles方法的具体实现主要是调用ConfigTransform实例的transform方法。也就是会将配置抽取成单独的文件。</p> <p>​       下面以eslint为例进行分析：在初始化项目的时候，如果选择了eslint插件，在调用@vue/cli-plugin-eslint的generator的时候，就会向package.json注入eslintConfig字段。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-36.d64c5bb7.png" alt="image"></p> <h3 id="resolvefiles"><a href="#resolvefiles" class="header-anchor">#</a> resolveFiles</h3> <p>​        resolveFiles主要分为以下三个部分执行：</p> <ul><li>fileMiddlewares：包含了ejs render函数，所有插件调用api.render时只是把对应的渲染函数push到了fileMiddlewares中，等所有的插件执行完以后才会遍历执行fileMiddlewares里面的所有函数，即在内存中生成模板文件字符串。</li> <li>injectImportsAndOptions：就是将generator注入的import和rootOption解析到对应的文件中，比如选择vuex，会在src/main.js中添加<code>import store from './store'</code>，在vue根实例中添加router选项。</li> <li>postProcessFilesCbs：是在所有普通文件在内存中渲染成字符串完成之后要执行的遍历回调。例如将@vue/cli-service/generator/index.js中的render放在了fileMiddlewares里面，而将@vue/cli-service/generator/router/index.js中将替换src/App.vue文件的方法放在了postProcessFiles里面，原因是对src/App.vue文件的一些替换一定是发生在render函数之后，如果在之前，修改后的src/App.vue在之后render函数执行时又会被覆盖，这样显然不合理。</li></ul> <h3 id="writefiletree"><a href="#writefiletree" class="header-anchor">#</a> writeFileTree</h3> <p>​      执行了generate的所有逻辑后，内存中已经有了需要输出的各种文件，放在this.files里。generate的最后一步就是调用<code>writeFileTree</code>将内存中的所有文件写入到硬盘。</p> <p>​      提取了配置文件和模板渲染后调用sortPkg对package.json的字段进行了排序并将package.json转化为json字符串添加到项目的files中。 此时整个项目的文件已经在内存中生成好了(在源码中就是对应的this.files)，接下来就调用writeFileTree方法将内存中的字符串模板文件生成在磁盘中。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-37.9a572de2.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-38.f973d63c.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-39.1019debf.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-40.783e1f84.png" alt="image"></p> <h2 id="installdeps依赖安装"><a href="#installdeps依赖安装" class="header-anchor">#</a> installDeps依赖安装</h2> <p><img src="/vivien-blog/assets/img/VueCLILearning-41.1778cece.png" alt="image"></p> <p>​        getVersions 的代码不多，看下比较核心的代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getVersions</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sessionCached<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sessionCached
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> latest
  <span class="token keyword">const</span> local <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vue-cli-version-marker'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>devDependencies
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_CLI_TEST</span> <span class="token operator">||</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_CLI_DEBUG</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>sessionCached <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">current</span><span class="token operator">:</span> local<span class="token punctuation">,</span>
      <span class="token literal-property property">latest</span><span class="token operator">:</span> local
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>fsCachePath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// if the cache file doesn't exist, this is likely a fresh install</span>
    <span class="token comment">// then create a cache file with the bundled version map</span>
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>fsCachePath<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>local<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> cached <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>fsCachePath<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> lastChecked <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span>fsCachePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mtimeMs
  <span class="token keyword">const</span> daysPassed <span class="token operator">=</span> <span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> lastChecked<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>daysPassed <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 距离上次检查更新超过一天</span>
    <span class="token comment">// if we haven't check for a new version in a day, wait for the check</span>
    <span class="token comment">// before proceeding</span>
    latest <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAndCacheLatestVersions</span><span class="token punctuation">(</span>cached<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// Otherwise, do a check in the background. If the result was updated,</span>
    <span class="token comment">// it will be used for the next 24 hours.</span>
    <span class="token function">getAndCacheLatestVersions</span><span class="token punctuation">(</span>cached<span class="token punctuation">)</span> <span class="token comment">// 后台更新</span>
    latest <span class="token operator">=</span> cached
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>sessionCached <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">current</span><span class="token operator">:</span> local<span class="token punctuation">,</span>
    latest
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>​       判断是否初始化Git仓库，并初始化Git仓库环境：这段代码会先调用 shouldInitGit 来判断是否需要 git 初始化。判断的情形有以下几种：</p> <ul><li>没有安装 git (!hasGit())：false；</li> <li><code>vue create</code> 含有 --git 或者 -g 选项：true；</li> <li><code>vue create</code> 含有 --no-git 或者 -n 选项：false；</li> <li>生成项目的目录是否已经含有 git （!hasProjectGit(this.context)）：如果有，则返回 false，否则返回 true。</li></ul> <p>在判断完是否需要git初始化项目后，接下来就会调用installDeps安装依赖，看下installDeps的源码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span><span class="token function-variable function">installDeps</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">installDeps</span> <span class="token punctuation">(</span><span class="token parameter">targetDir<span class="token punctuation">,</span> command<span class="token punctuation">,</span> cliRegistry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">'npm'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'install'</span><span class="token punctuation">,</span> <span class="token string">'--loglevel'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">'yarn'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do nothing</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Unknown package manager: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">await</span> <span class="token function">addRegistryToArgs</span><span class="token punctuation">(</span>command<span class="token punctuation">,</span> args<span class="token punctuation">,</span> cliRegistry<span class="token punctuation">)</span>

  <span class="token function">debug</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">command: </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> command<span class="token punctuation">)</span> <span class="token comment">// DEBUG=vue-cli:install vue create demo</span>
  <span class="token function">debug</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">args: </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>

  <span class="token keyword">await</span> <span class="token function">executeCommand</span><span class="token punctuation">(</span>command<span class="token punctuation">,</span> args<span class="token punctuation">,</span> targetDir<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>​       判断是否为是测试或调试环境：是则调用setupDevProject启动开发服务；在开发过程中避免安装过程；否则根据package.json文件安装项目依赖。在生成package.json之后，我们继续看下面的代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// intilaize git repository before installing deps</span>
<span class="token comment">// so that vue-cli-service can setup git hooks.</span>
<span class="token keyword">const</span> shouldInitGit <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">shouldInitGit</span><span class="token punctuation">(</span>cliOptions<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>shouldInitGit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">logWithSpinner</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">🗃</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Initializing git repository...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'git-init'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'git init'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// install plugins</span>
<span class="token function">stopSpinner</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">⚙  Installing CLI plugins. This might take a while...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'plugins-install'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>isTestOrDebug<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// in development, avoid installation process</span>
  <span class="token keyword">await</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./util/setupDevProject'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token comment">// @vue/cli-service/bin/vue-cli-service</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">installDeps</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> packageManager<span class="token punctuation">,</span> cliOptions<span class="token punctuation">.</span>registry<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="结尾分析"><a href="#结尾分析" class="header-anchor">#</a> 结尾分析</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// install additional deps (injected by generators)  安装额外依赖</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">📦  Installing additional dependencies...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'deps-install'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isTestOrDebug<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">installDeps</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> packageManager<span class="token punctuation">,</span> cliOptions<span class="token punctuation">.</span>registry<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// run complete cbs if any (injected by generators)  执行createCompleteCbs</span>
<span class="token function">logWithSpinner</span><span class="token punctuation">(</span><span class="token string">'⚓'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Running completion hooks...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'completion-hooks'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> cb <span class="token keyword">of</span> createCompleteCbs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// generate README.md  生成README.md</span>
<span class="token function">stopSpinner</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">logWithSpinner</span><span class="token punctuation">(</span><span class="token string">'📄'</span><span class="token punctuation">,</span> <span class="token string">'Generating README.md...'</span><span class="token punctuation">)</span>
<span class="token keyword">await</span> <span class="token function">writeFileTree</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'README.md'</span><span class="token operator">:</span> <span class="token function">generateReadme</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span>pkg<span class="token punctuation">,</span> packageManager<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// commit initial state  git初始化提交</span>
<span class="token keyword">let</span> gitCommitFailed <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>shouldInitGit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'git add -A'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isTestOrDebug<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'git'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'config'</span><span class="token punctuation">,</span> <span class="token string">'user.name'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'git'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'config'</span><span class="token punctuation">,</span> <span class="token string">'user.email'</span><span class="token punctuation">,</span> <span class="token string">'test@test.com'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token keyword">typeof</span> cliOptions<span class="token punctuation">.</span>git <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">?</span> cliOptions<span class="token punctuation">.</span>git <span class="token operator">:</span> <span class="token string">'init'</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'git'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'commit'</span><span class="token punctuation">,</span> <span class="token string">'-m'</span><span class="token punctuation">,</span> msg<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gitCommitFailed <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// log instructions  日志输出</span>
<span class="token function">stopSpinner</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">🎉  Successfully created project </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">yellow</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">👉  Get started with the following commands:\n\n</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
  <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">===</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> chalk<span class="token punctuation">.</span><span class="token function">cyan</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">gray</span><span class="token punctuation">(</span><span class="token string">'$'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> cd </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  chalk<span class="token punctuation">.</span><span class="token function">cyan</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">gray</span><span class="token punctuation">(</span><span class="token string">'$'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>packageManager <span class="token operator">===</span> <span class="token string">'yarn'</span> <span class="token operator">?</span> <span class="token string">'yarn serve'</span> <span class="token operator">:</span> <span class="token string">'npm run serve'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'creation'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">'done'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>gitCommitFailed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">warn</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Skipped git commit due to missing username and email in git config.\n</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You will need to perform the initial commit yourself.\n</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

generator<span class="token punctuation">.</span><span class="token function">printExitLogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h3 id="安装额外依赖"><a href="#安装额外依赖" class="header-anchor">#</a> 安装额外依赖</h3> <p>​       安装由生成器实例注入的依赖：这里的依赖来源于preset的option，比如选择了scss、css预处理器，那么就需要额外安装node-sass和sass-loader两个依赖。</p> <p>​        调用ProjectManage的install方法安装依赖，简单来说就是读取package.json然后分别安装npm的不同依赖。</p> <p>​       自动判断NPM源 ：</p> <p>​        关于安装依赖时使用的npm仓库源，如果用户没有指定安装源，Vue CLI会自动判断是否使用淘宝的NPM安装源。</p> <h3 id="执行-createcompletecbs"><a href="#执行-createcompletecbs" class="header-anchor">#</a> 执行 createCompleteCbs</h3> <p>​       运行初始化后的回调：所有文件都写在磁盘后遍历地执行回调。@vue/cli-plugin-eslint的generator就注入了 createCompleteCbs，源码如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// lint &amp; fix after create to ensure files adhere to chosen config</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">&amp;&amp;</span> config <span class="token operator">!==</span> <span class="token string">'base'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  api<span class="token punctuation">.</span><span class="token function">onCreateComplete</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../lint'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">silent</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> api<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token comment">//作用就是对生成后的文件进行lint&amp;fix，保证符合elsit所选的配置。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="生成-readme-md"><a href="#生成-readme-md" class="header-anchor">#</a> 生成 README.md</h3> <p>​       生成README.md：这里需要注意的一点是，调用的generateReadme函数会根据package.json的script的字段生成生成对应的README.md。</p> <p>​        项目的README.md会根据上下文动态生成，而不是写死的一个文档。</p> <p>​         README.md会告知用户如何使用这个项目，除了npm install之外，会根据package.json里的scripts参数来动态生成使用文档，比如如何开发、构建和测试</p> <h3 id="git-初始化提交"><a href="#git-初始化提交" class="header-anchor">#</a> git 初始化提交</h3> <p>​       暂存 git，拉取远程preset：git初始化提交主要就是调用shouldInitGit来判断是否需要git初始化提交，如果需要初始化提交就会执行<code>git add</code>和<code>git commmit</code>命令，只有在以下情况会git初始化提交：</p> <ul><li>--git: vue create 含有 -g 或者 --git 选项</li></ul> <p>​        根据传入的参数和一系列的判断，会在目标目录下初始化Git环境，简单来说就是执行一下git init</p> <h3 id="日志输出"><a href="#日志输出" class="header-anchor">#</a> 日志输出</h3> <p>​       打印创建结果：插件的generator可以利用GeneratorAPI暴露的exitLog方法在项目输出其他所有的message之后输出一些日志。</p> <h1 id="cli-服务"><a href="#cli-服务" class="header-anchor">#</a> CLI 服务</h1> <ul><li>在vue-cli-service.js这个文件中，首先引入了lib目录下的Service并对其进行实例化，生成一个服务实例service。</li> <li>然后通过process.argv读取nodejs执行时传入的变量，即在执行vue-cli-service时后面跟的serve。</li> <li>然后使用执行vue-cli-service时传入的命令，即serve执行了service实例上的run方法。</li> <li>至此，我们可以将vue-cli-service的执行简单概括为以下步骤
<ul><li>服务实例化——new Service()</li> <li>解析执行命令——serve</li> <li>运行服务——service.run('serve')</li></ul></li></ul> <p>​        <code>vue-cli-service</code>命令执行前，先创建了一个Service类，并通过<code>service.run()</code>方法执行执行命令。</p> <h2 id="vue-cli-service"><a href="#vue-cli-service" class="header-anchor">#</a> @vue/cli-service</h2> <p>​        该插件是Vue CLI的核心插件，和<code>create react app</code>的react-scripts类似，借助这个插件，能够更深刻地理解GeneratorAPI和Vue CLI的插件架构是如何实现的。来看一下@vue/cli-service这个包下的generator/index.js文件，将源码拆解成多段，其实也就是分别调用了GeneratorAPI实例的不同方法。</p> <h3 id="渲染-template"><a href="#渲染-template" class="header-anchor">#</a> 渲染 template</h3> <p>​        将template目录下的文件通过render渲染到内存中，这里用的是ejs作为模板渲染引擎。通过GeneratorAPI提供的实例方法，可以在插件中非常方便地对项目进行修改和自定义。</p> <p><img src="/vivien-blog/assets/img/VueCLILearning-42.3e9ddf62.png" alt="image"></p> <h3 id="写package-json"><a href="#写package-json" class="header-anchor">#</a> 写package.json</h3> <p><img src="/vivien-blog/assets/img/VueCLILearning-43.2aeefef0.png" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-44.d2929cf1.png" alt="image"></p> <h3 id="调用router插件和vuex插件"><a href="#调用router插件和vuex插件" class="header-anchor">#</a> 调用router插件和vuex插件</h3> <p><img src="/vivien-blog/assets/img/VueCLILearning-45.455d378c.png" alt="image"></p> <h2 id="使用命令"><a href="#使用命令" class="header-anchor">#</a> 使用命令</h2> <p>​        在一个Vue CLI项目中，@vue/cli-service安装了一个名为vue-cli-service的命令。可以在<code>npm scripts</code>中以<code>vue-cli-service</code>，或从终端中以<code>./node_modules/.bin/vue-cli-service</code>访问这个命令。</p> <p>​        这是使用默认preset的项目的package.json。可以通过npm或Yarn调用这些script。</p> <p><img src="data:image/png;base64,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" alt="image"></p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIsAAABoCAYAAADByQPTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAVFSURBVHhe7Z2/btRKFIfv41DcEglRBEUICd02QqKgTZWGgjYSSioE3AfYMgjlJfjzCGifYelXvMHg+WefGXvt33J3s3udr/ik2DNzbOV8OWfSeP568PdDB6CALCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCDLCCjyXJ26n69eeyuz5+5X//+E/h5/qgd9/f99ac3ccyzPLNrT9zXK3//mft6duJ++jlXJ+46xx/j89KtV9/d1fV3t1qv3dqzvE3j79yX1dr9+NzNv/q2MuO37sd66W7sWh8rzZ0mxg/rAk2sYtzH78ZX3951Y+GZfr6Z0z473rPv3b83EvtA6LL4BDfCdNen7lMazxK1AtnxtNbLE2Xy9x+7pRfnNK4fxcsSfmEpUSEJK/fl2o8rspi1g0naTBmrJj67S2IVuxU0v2s5frNsxmzsVi5/PRH7QOiyFJWgTHaQJYtUj5u1XpYo1Lay5F+4xwqiyGLXxiSpf6UhVq+aJHxyqypVPDvJYt+teHYhR1xbjI3FPhB7lCW1ol3IsrF17FcWT6gAoUJU69qKV1HIskG0QC29ec+p2Afi/1FZDihLR2wF7drR92qYlMW8a11JpmIfiL3IEvYmef4dyFIksPgL3KUs1bNqeWoEWbIkN400VvjJ2Adid7L4DXDGzt2rLA0hKalMp1/8bmSJcoy3gZhUO6dNuiJLQ2xzQ/NGYh8ITZYJ+m0I5giygAyygMxOZIH7AbKADLKADLKADLKADLKADLKADLKADLKADLKADLKADLKADLKAjC7L09fu/YfX7knz85OLj25x+Wp43iDP3cWHhVssEilOGHv5trsf+Oguntq1cCxsJ0sSxMvy/uJ5f84gUZRufhIny+ZlMfIEERdv3Yt0DceDIEtVFQqEpFYyBLx4eW09HioNshwjcmXpqkmU5/Ll8Lya4Zb1yl02soUYlSwvLhsJa7ngKPgDWXyi9X2FT36/ZRnhQiUx1WqrvRDcJdOyhJZhkmlQ9i2bK0sSzlYWWtBRI1YWUwnsfkOhajOBjXuW+BxFQrh7tpAlVQKf6K32FHF/0glQCVHLRHU5WkRZNrQNmSjMYPvqxYsysXc5PuQNLgCygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygIwgy6NwCln85v7me+X3+8vv8udv9ts55Ulnm09Jm6b+xn79HfzyG/jFd/vb7+ubOfmcgHBoRBWrd28k9gyRKktIpD284dQfXWeEaK6XtThmfjglxIuQvsJdjHtZzFi87k5Jm2L80KbhkzzKwxh8ovNhEHa8mttQPmsi9gwR29D4kTE9gkxdwosjZerxiRNHpggJHDxVoyEd0WJPFCkSnmSxCbanhvTlMCeMTMWeIfKepTv+xbegOpmxLeU2Eill2dha/qMsnngMy0AryOcP1RSybBDNY8drOaZizxB9g5uT6qtCkdyJypHG9ylLR2wFrTDSWUUjsqRW4yuPrxo9EcdizxBdlrypbapKuzlNBFnatpSrzCFkGd5HFEm2TMqSJblt4tbzJmLPkC1kyf/xdBK0hEqS20/zn875XVWWKMd4G4hJtXPaPYogS7t+sL2MxJ4h28sytrGFWaPLEqrHn7YHmAPTspgWU+9V4H6xVRuC+w2ygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygAyygMhD9xtrm/6Qy4bjKwAAAABJRU5ErkJggg==" alt="image"></p> <h2 id="vue-cli-service-serve"><a href="#vue-cli-service-serve" class="header-anchor">#</a> vue-cli-service serve</h2> <p>​        会启动一个开发服务器(基于webpack-dev-server)并附带开箱即用的模块热重载。npm run serve对应的实际是vue-cli-service serve的执行。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>用法：vue<span class="token operator">-</span>cli<span class="token operator">-</span>service serve <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>entry<span class="token punctuation">]</span>

选项：
  <span class="token operator">--</span>open    在服务器启动时打开浏览器
  <span class="token operator">--</span>copy    在服务器启动时将 <span class="token constant">URL</span> 复制到剪切版
  <span class="token operator">--</span>mode    <span class="token function">指定环境模式</span> <span class="token punctuation">(</span>默认值：development<span class="token punctuation">)</span>
  <span class="token operator">--</span>host    指定 <span class="token function">host</span> <span class="token punctuation">(</span>默认值：<span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">)</span>
  <span class="token operator">--</span>port    指定 <span class="token function">port</span> <span class="token punctuation">(</span>默认值：<span class="token number">8080</span><span class="token punctuation">)</span>
  <span class="token operator">--</span>https   使用 <span class="token function">https</span> <span class="token punctuation">(</span>默认值：<span class="token boolean">false</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>​        除了通过命令行参数，也可以使用vue.config.js里的devServer字段配置开发服务器。</p> <p>​        命令行参数[entry]将被指定为唯一入口(默认值：src/main.js，TypeScript项目则为src/main.ts)，而非额外的追加入口。尝试使用[entry]覆盖config.pages中的entry将可能引发错误。</p> <h2 id="vue-cli-service-build"><a href="#vue-cli-service-build" class="header-anchor">#</a> vue-cli-service build</h2> <p>​       会在dist/目录产生一个可用于生产环境的包，用webpack对项目进行构建，带有JS/CSS/HTML的压缩和为更好的缓存而做的自动的vendor chunk splitting。它的chunk manifest会内联在HTML里。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>用法：vue<span class="token operator">-</span>cli<span class="token operator">-</span>service build <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>entry<span class="token operator">|</span>pattern<span class="token punctuation">]</span>

选项：
  <span class="token operator">--</span>mode        <span class="token function">指定环境模式</span> <span class="token punctuation">(</span>默认值：production<span class="token punctuation">)</span>
  <span class="token operator">--</span>dest        <span class="token function">指定输出目录</span> <span class="token punctuation">(</span>默认值：dist<span class="token punctuation">)</span>
  <span class="token operator">--</span>modern      面向现代浏览器带自动回退地构建应用
  <span class="token operator">--</span>target      app <span class="token operator">|</span> lib <span class="token operator">|</span> wc <span class="token operator">|</span> wc<span class="token operator">-</span><span class="token keyword">async</span> <span class="token punctuation">(</span>默认值：app<span class="token punctuation">)</span>
  <span class="token operator">--</span>name        库或 Web Components <span class="token function">模式下的名字</span> <span class="token punctuation">(</span>默认值：<span class="token keyword">package</span><span class="token punctuation">.</span>json 中的 <span class="token string">&quot;name&quot;</span> 字段或入口文件名<span class="token punctuation">)</span>
  <span class="token operator">--</span>no<span class="token operator">-</span>clean    在构建项目之前不清除目标目录的内容
  <span class="token operator">--</span>report      生成 report<span class="token punctuation">.</span>html 以帮助分析包内容
  <span class="token operator">--</span>report<span class="token operator">-</span>json 生成 report<span class="token punctuation">.</span>json 以帮助分析包内容
  <span class="token operator">--</span>watch       监听文件变化
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>​        这里还有一些有用的命令参数：</p> <ul><li>--modern：使用现代模式构建应用，为现代浏览器交付原生支持的ES2015代码，并生成一个兼容老浏览器的包用来自动回退。</li> <li>--target：允许你将项目中的任何组件以一个库或Web Components组件的方式进行构建。</li> <li>--report 和 --report-json：会根据构建统计生成报告，它会帮助分析包中包含的模块们的大小。</li></ul> <h2 id="vue-cli-service-inspect"><a href="#vue-cli-service-inspect" class="header-anchor">#</a> vue-cli-service inspect</h2> <p>​        可以使用vue-cli-service inspect来审查一个Vue CLI项目的webpack config。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>用法：vue<span class="token operator">-</span>cli<span class="token operator">-</span>service inspect <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">...</span>paths<span class="token punctuation">]</span>

选项：
  <span class="token operator">--</span>mode    <span class="token function">指定环境模式</span> <span class="token punctuation">(</span>默认值：development<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="webpack-相关"><a href="#webpack-相关" class="header-anchor">#</a> webpack 相关</h1> <h2 id="简单的配置方式"><a href="#简单的配置方式" class="header-anchor">#</a> 简单的配置方式</h2> <p>​         在vue.config.js中的configureWebpack选项提供一个对象：</p> <p><img src="data:image/png;base64,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" alt="image"></p> <p><img src="/vivien-blog/assets/img/VueCLILearning-49.b368b439.png" alt="image"></p> <h2 id="链式操作-高级"><a href="#链式操作-高级" class="header-anchor">#</a> 链式操作 (高级)</h2> <p>​        Vue CLI内部的webpack配置是通过webpack-chain维护的。这个库提供了一个webpack原始配置的上层抽象，使其可以定义具名的loader规则和具名插件，并有机会在后期进入这些规则并对它们的选项进行修改。它允许我们更细粒度地控制其内部配置。</p> <h2 id="审查项目的-webpack-配置"><a href="#审查项目的-webpack-配置" class="header-anchor">#</a> 审查项目的 webpack 配置</h2> <p>​        因为@vue/cli-service对webpack配置进行了抽象，所以理解配置中包含的东西会比较困难。vue-cli-service暴露了inspect命令用于审查解析好的webpack配置。那个全局的vue可执行程序同样提供了inspect命令，这个命令只是简单的把vue-cli-service inspect代理到了项目中。该命令会将解析出来的webpack配置，包括链式访问规则和插件的提示打印到stdout。</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2024/7/27 12:43:06</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/vivien-blog/Vue/原理学习/Vue2响应式原理.html" class="prev">
          Vue2响应式原理
        </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-9f22dc18 data-v-222e0b9d><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#预设管理" class="sidebar-link reco-side-预设管理" data-v-9f22dc18>预设管理</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#插件系统" class="sidebar-link reco-side-插件系统" data-v-9f22dc18>插件系统</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#整个生命周期" class="sidebar-link reco-side-整个生命周期" data-v-9f22dc18>整个生命周期</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#用法" class="sidebar-link reco-side-用法" data-v-9f22dc18>用法</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#入口" class="sidebar-link reco-side-入口" data-v-9f22dc18>入口</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#基础验证" class="sidebar-link reco-side-基础验证" data-v-9f22dc18>基础验证</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#creator类" class="sidebar-link reco-side-creator类" data-v-9f22dc18>Creator类</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#constructor-构造函数" class="sidebar-link reco-side-constructor-构造函数" data-v-9f22dc18>constructor 构造函数</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#eventemitter-事件模块" class="sidebar-link reco-side-eventemitter-事件模块" data-v-9f22dc18>EventEmitter 事件模块</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#preset-预设" class="sidebar-link reco-side-preset-预设" data-v-9f22dc18>Preset 预设</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#getpromptmodules-获取交互模块" class="sidebar-link reco-side-getpromptmodules-获取交互模块" data-v-9f22dc18>getPromptModules 获取交互模块</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#getpreset-获取预设" class="sidebar-link reco-side-getpreset-获取预设" data-v-9f22dc18>getPreset 获取预设</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#savepreset-保存预设" class="sidebar-link reco-side-savepreset-保存预设" data-v-9f22dc18>savePreset 保存预设</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#自定义配置加载" class="sidebar-link reco-side-自定义配置加载" data-v-9f22dc18>自定义配置加载</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#generator类" class="sidebar-link reco-side-generator类" data-v-9f22dc18>Generator类</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#初始化插件" class="sidebar-link reco-side-初始化插件" data-v-9f22dc18>初始化插件</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#generatorapi" class="sidebar-link reco-side-generatorapi" data-v-9f22dc18>GeneratorAPI</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#extendpackage" class="sidebar-link reco-side-extendpackage" data-v-9f22dc18>extendPackage</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#extractconfigfiles" class="sidebar-link reco-side-extractconfigfiles" data-v-9f22dc18>extractConfigFiles</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#resolvefiles" class="sidebar-link reco-side-resolvefiles" data-v-9f22dc18>resolveFiles</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#writefiletree" class="sidebar-link reco-side-writefiletree" data-v-9f22dc18>writeFileTree</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#installdeps依赖安装" class="sidebar-link reco-side-installdeps依赖安装" data-v-9f22dc18>installDeps依赖安装</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#结尾分析" class="sidebar-link reco-side-结尾分析" data-v-9f22dc18>结尾分析</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#安装额外依赖" class="sidebar-link reco-side-安装额外依赖" data-v-9f22dc18>安装额外依赖</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#执行-createcompletecbs" class="sidebar-link reco-side-执行-createcompletecbs" data-v-9f22dc18>执行 createCompleteCbs</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#生成-readme-md" class="sidebar-link reco-side-生成-readme-md" data-v-9f22dc18>生成 README.md</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#git-初始化提交" class="sidebar-link reco-side-git-初始化提交" data-v-9f22dc18>git 初始化提交</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#日志输出" class="sidebar-link reco-side-日志输出" data-v-9f22dc18>日志输出</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#vue-cli-service" class="sidebar-link reco-side-vue-cli-service" data-v-9f22dc18>@vue/cli-service</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#渲染-template" class="sidebar-link reco-side-渲染-template" data-v-9f22dc18>渲染 template</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#写package-json" class="sidebar-link reco-side-写package-json" data-v-9f22dc18>写package.json</a></li><li class="level-3" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#调用router插件和vuex插件" class="sidebar-link reco-side-调用router插件和vuex插件" data-v-9f22dc18>调用router插件和vuex插件</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#使用命令" class="sidebar-link reco-side-使用命令" data-v-9f22dc18>使用命令</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#vue-cli-service-serve" class="sidebar-link reco-side-vue-cli-service-serve" data-v-9f22dc18>vue-cli-service serve</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#vue-cli-service-build" class="sidebar-link reco-side-vue-cli-service-build" data-v-9f22dc18>vue-cli-service build</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#vue-cli-service-inspect" class="sidebar-link reco-side-vue-cli-service-inspect" data-v-9f22dc18>vue-cli-service inspect</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#简单的配置方式" class="sidebar-link reco-side-简单的配置方式" data-v-9f22dc18>简单的配置方式</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#链式操作-高级" class="sidebar-link reco-side-链式操作-高级" data-v-9f22dc18>链式操作 (高级)</a></li><li class="level-2" data-v-9f22dc18><a href="/vivien-blog/Vue/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/VueCLI.html#审查项目的-webpack-配置" class="sidebar-link reco-side-审查项目的-webpack-配置" data-v-9f22dc18>审查项目的 webpack 配置</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-2a01419c data-v-2a01419c><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-2a01419c><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-2a01419c></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-2a01419c></path></svg></div></div></div>
    <script src="/vivien-blog/assets/js/app.6cea8693.js" defer></script><script src="/vivien-blog/assets/js/7.ec60f3e8.js" defer></script><script src="/vivien-blog/assets/js/2.6744b811.js" defer></script><script src="/vivien-blog/assets/js/1.4a3363c7.js" defer></script><script src="/vivien-blog/assets/js/14.dac78458.js" defer></script>
  </body>
</html>
